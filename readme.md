# 设计模式

## 工厂模式

1. 用UML绘制出三种工厂模式的类结构图。

   ![1552203476461](C:\Users\shenl\AppData\Roaming\Typora\typora-user-images\1552203476461.png)

![1552203587803](C:\Users\shenl\AppData\Roaming\Typora\typora-user-images\1552203587803.png)

2. 深刻理解产品族和产品等级结构之间的关系。

   答复：产品族是用来解决兼容问题，一个产品族的产品必然按照一个方式搭配的，而产品等级结构是用来继承的

   ## 单例模式

   1、总结每种单例写法的优、缺点。

   * 饿汉模式  加载这个类的时候就是实例化，容易浪费内存
   * 懒汉模式 调用实例方法的时候才去初始化对象，由于调用存在多线程问题，所以考虑多线程的情况，使用双重检测锁（同步关键词），并且实力对象需要加volitile
   * 懒汉式内部类  这种方法需要一个内部类，再调用实例化的时候，内部内，并且不要同步方法
   * 枚举模式  其实反编译源码，发现也是饿汉式，美剧好处的是就是无法反序列化（java的反序列化），因为反序列化的源码禁止反序列化枚举类
   * threadlocal方法  每个线程各创建一个线程，但是这样容易是的内存泄露

   2、思考破坏单例模式的方式有哪些？并且归纳总结。

   + 破坏单例的方法有 反射和序列化
   + 反射可以通过一个boolean对象来解决，调用实例方法可以把boolean类型改为true，反射调用构造方法的时候检测是否为true，如果为true报错。
   + 序列化的时候可以价格resolveObject返回当前实例化的方法来杜绝序列化的问题

   3、梳理内部类的执行逻辑，并画出时序图。ss's